(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a189544"],{"0976":function(t,e,s){},"1d89":function(t,e,s){},"222c":function(t,e,s){"use strict";var i=s("0976"),a=s.n(i);a.a},"3f3b":function(t,e,s){},4124:function(t,e,s){"use strict";s("99af");var i=s("d4ec"),a=s("bee2"),n=s("365c"),c=function(){function t(){Object(i["a"])(this,t)}return Object(a["a"])(t,null,[{key:"cryptocurrenciesWithdrawal",value:function(t,e){return Object(n["b"])("/market/banner/".concat(t,"/").concat(e))}},{key:"userFavList",value:function(){return Object(n["a"])("/coin/market/collection/list")}},{key:"blogCategoryList",value:function(){return Object(n["a"])("/blogCategory/list")}},{key:"blogDetailList",value:function(t,e){return Object(n["a"])("/blog/list/".concat(t),e)}},{key:"blogDetailContent",value:function(t){return Object(n["a"])("/blog/detail/".concat(t))}},{key:"getMarketList",value:function(){return Object(n["a"])("/exchange/getMarketList")}},{key:"getBooks",value:function(t){return Object(n["a"])("/exchange/getMarketInfo",t)}},{key:"getCoinInfo",value:function(t){return Object(n["a"])("/exchange/getCoinInfo",t)}}]),t}();e["a"]=c},"99c7":function(t,e,s){"use strict";var i=s("1d89"),a=s.n(i);a.a},b4b8:function(t,e,s){"use strict";var i=s("d4ec"),a=s("bee2"),n=s("365c"),c=function(){function t(){Object(i["a"])(this,t)}return Object(a["a"])(t,null,[{key:"getUserBalance",value:function(t){return Object(n["a"])("/exchange/getUserCoinBalance",t)}},{key:"storeEntrust",value:function(t,e){return Object(n["b"])("/exchange/storeEntrust",t,e)}},{key:"getSymbolInfo",value:function(t){return Object(n["b"])("/user/tradingPairCurrency",t)}},{key:"newTrends",value:function(){return Object(n["a"])("/newTrends")}},{key:"getCurrencyExCny",value:function(t){return Object(n["a"])("/market/getCurrencyExCny",t)}}]),t}();e["a"]=c},f697:function(t,e,s){"use strict";var i=s("3f3b"),a=s.n(i);a.a},f876:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-col"},[s("van-tabs",{staticClass:"p-y-md bg-panel-4",attrs:{type:"card"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("van-tab",{attrs:{title:t.$t("exchange.a0"),name:0}}),s("van-tab",{attrs:{title:t.$t("exchange.a1"),name:1}})],1),0==t.tab?[s("div",{staticClass:"coin-exchange-box flex-fill d-flex flex-col bg-panel-4 overflow-hidden"},[s("van-tabs",{attrs:{ellipsis:!1},model:{value:t.tab1,callback:function(e){t.tab1=e},expression:"tab1"}},[s("van-tab",{staticClass:"height-max",attrs:{title:t.$t("exchange.a3")}}),s("van-tab",{staticClass:"height-max",attrs:{title:t.$t("exchange.a4")}}),s("van-tab",{staticClass:"height-max",attrs:{title:t.$t("exchange.a5")}})],1),0==t.tab1?s("exchange-transaction",{staticClass:"layout-main",attrs:{marketList:t.marketList,collect:t.collect},on:{symbol:function(e){t.symbolListShow=!0},option:t.option}}):t._e(),1==t.tab1?s("current-commission",{staticClass:"layout-main"}):t._e(),2==t.tab1?s("history-commisson",{staticClass:"layout-main"}):t._e()],1)]:t._e(),1==t.tab?[s("purchase")]:t._e(),s("van-popup",{style:{height:"100%",width:"70%"},attrs:{closeable:"","close-on-popstate":"",position:"left"},model:{value:t.symbolListShow,callback:function(e){t.symbolListShow=e},expression:"symbolListShow"}},[s("symbol-list",{attrs:{collect:t.collect,marketList:t.marketList},on:{"check-symbol":t.checkSymbol}})],1)],2)},a=[],n=(s("ac1f"),s("5319"),s("4c53"),s("5530")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex p-md justify-between align-center fn-18 color-light"},[s("div",{on:{click:function(e){return t.$emit("symbol")}}},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "+t._s(t.symbol)+" ")]),s("div",{staticClass:"d-flex fn-20 color-theme-1"},[s("div",{staticClass:"m-r-xs",on:{click:function(e){return t.$emit("option")}}},[t.isCoolect?s("van-icon",{attrs:{name:"star"}}):s("van-icon",{staticClass:"color-light",attrs:{name:"star-o"}})],1),t.symbol?s("router-link",{attrs:{tag:"div",to:{path:"exchange",query:{code:t.symbol}}}},[s("van-icon",{attrs:{name:"chart-trending-o"}})],1):t._e()],1)]),s("div",{staticClass:"d-flex p-x-md p-b-md"},[s("div",{staticClass:"w-6/12"},[s("div",{staticClass:"d-flex fn-center justify-between"},[s("div",{staticClass:"color-gray w-6/12 p-y-xs",class:{"bg-buy":"buy"==t.form.direction,"color-light":"buy"==t.form.direction,"bg-panel-3":"buy"!=t.form.direction},on:{click:function(e){t.form.direction="buy",t.getDefaultPrice()}}},[t._v(" "+t._s(t.$t("exchange.c3"))+" ")]),s("div",{staticClass:"color-gray w-6/12 p-y-xs",class:{"bg-sell":"sell"==t.form.direction,"color-light":"sell"==t.form.direction,"bg-panel-3":"sell"!=t.form.direction},on:{click:function(e){t.form.direction="sell",t.getDefaultPrice()}}},[t._v(" "+t._s(t.$t("exchange.c4"))+" ")])]),s("div",{staticClass:"p-y-xs color-light fn-sm",on:{click:t.selectType}},[t._v(" "+t._s(t.activeType.label)+" "),s("i",{staticClass:"iconfont color-theme-1"},[t._v("")])]),1==t.form.type?[s("div",[s("van-stepper",{attrs:{min:0,"input-width":"65%",step:"0.01"},model:{value:t.form.entrust_price,callback:function(e){t.$set(t.form,"entrust_price",e)},expression:"form.entrust_price"}}),s("div",{staticClass:"tips fn-xs m-t-xs"},[t._v(t._s(t.targetCoin))])],1),s("div",{staticClass:"m-t-xs"},[s("v-input",{staticClass:"h-30 p-x-xs rounded color-light bg-panel-3",attrs:{placeholder:t.$t("exchange.c5")},scopedSlots:t._u([{key:"right",fn:function(){return[s("div",{staticClass:"color-default"},[t._v(t._s(t.activeCoin.coin_name))])]},proxy:!0}],null,!1,3409394779),model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1)]:t._e(),2==t.form.type?[s("div",[s("v-input",{staticClass:"h-30 p-x-xs rounded color-light bg-panel-3",attrs:{disabled:"",placeholder:t.$t("exchange.c6")}})],1),s("div",{staticClass:"tips fn-xs m-t-xs color-panel-4"},[t._v(t._s(t.targetCoin))]),s("div",{staticClass:"m-t-xs"},[s("v-input",{staticClass:"h-30 p-x-xs rounded color-light bg-panel-3",attrs:{placeholder:"buy"==t.form.direction?t.$t("exchange.c7"):t.$t("exchange.c5")},scopedSlots:t._u([{key:"right",fn:function(){return["sell"==t.form.direction?s("div",{staticClass:"color-default"},[t._v(" "+t._s(t.currentCoin)+" ")]):t._e(),"buy"==t.form.direction?s("div",{staticClass:"color-default"},[t._v(" "+t._s(t.targetCoin)+" ")]):t._e()]},proxy:!0}],null,!1,1339263769),model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1)]:t._e(),s("div",[s("div",{staticClass:"tips fn-xs m-t-xs"},[t._v(" "+t._s(t.$t("exchange.c8"))+"："+t._s(t.usable)+t._s(t.usableUnit)+" ")])]),s("div",[s("van-steps",{attrs:{active:t.activeStep},on:{"click-step":t.sliderChange}},[s("van-step",[t._v("0%")]),s("van-step"),s("van-step"),s("van-step"),s("van-step",[t._v("100%")])],1)],1),s("div",{staticClass:"d-flex fn-sm m-b-xs color-light justify-between"},[s("span",[t._v(t._s(t.$t("exchange.c9"))+"：")]),2==t.form.type&&"sell"==t.form.direction?s("span",[t._v(t._s(t.totalMoney)+" "+t._s(t.currentCoin))]):s("span",[t._v(t._s(t.totalMoney)+" "+t._s(t.targetCoin))])]),t.isLogin?[s("v-button",{ref:"btn",staticClass:"w-max",attrs:{size:"small",type:"buy"==t.form.direction?"primary":"danger"},on:{click:t.storeEntrust}},[t._v(t._s("buy"==t.form.direction?this.$t("exchange.c3"):this.$t("exchange.c4"))+" "+t._s(t.activeCoin.coin_name))])]:[s("v-button",{staticClass:"w-max",attrs:{size:"small",to:"/login",type:"buy"==t.form.direction?"primary":"danger"}},[t._v(t._s(t.$t("exchange.d0")))])],s("router-link",{staticClass:"border m-t-md",attrs:{to:{path:"exchange",query:{code:t.symbol}},tag:"div"}},[s("div",{staticClass:"border-b color-light p-xs fn-xs"},[t._v(" "+t._s(t.symbol)+" "+t._s(t.$t("exchange.d1"))+" ")]),s("div",{staticClass:"h-100"},[s("time-sharing",{ref:"highChart",attrs:{tradeList:t.tradeList}})],1)])],2),s("div",{staticClass:"w-6/12 p-l-xs d-flex flex-col dep-list"},[s("sell-and-buy",{attrs:{buyList:t.buyList,sellList:t.sellList}},[s("div",{staticClass:"fn-md row",class:t.newPrice.increase<0?"color-sell":"color-buy"},[t._v(" "+t._s(t.newPrice.price)+" ")]),t.newPrice.price?s("div",{staticClass:"fn-xs"},[t._v(" ≈"+t._s(t.omitTo(t.newPrice.price*t.price_cny,2))+"CNY ")]):t._e()])],1)]),s("div",{staticClass:"h-20 bg-panel-1"}),s("div",{staticClass:"p-md"},[s("div",{staticClass:"color-light"},[t._v(t._s(t.$t("exchange.d3")))]),s("table",{staticClass:"w-max"},[s("thead",{staticClass:"fn-xs"},[s("tr",[s("td",[t._v(t._s(t.$t("exchange.d4")))]),s("td",[t._v(t._s(t.$t("exchange.d5")))]),s("td",{staticClass:"fn-right"},[t._v(t._s(t.$t("exchange.d2")))]),s("td",{staticClass:"fn-right"},[t._v(t._s(t.$t("exchange.c5")))])])]),s("tbody",{staticClass:"color-light"},t._l(t.tradeList,(function(e){return s("tr",{key:e.tradeId+e.ts},[s("td",{staticClass:"p-y-xs"},[t._v(" "+t._s(t.parseTime(e.ts,!1,"{h}:{i}:{s}"))+" ")]),s("td",{class:"color-"+e.direction},["buy"==e.direction?[t._v(t._s(t.$t("exchange.b5")))]:[t._v(t._s(t.$t("exchange.b6")))]],2),s("td",{staticClass:"fn-right"},[t._v(t._s(e.price))]),s("td",{staticClass:"p-y-xs fn-right"},[t._v(t._s(1*t.omitTo(e.amount,8)))])])})),0)])])])},r=[],o=(s("99af"),s("7db0"),s("4160"),s("caad"),s("d81d"),s("b680"),s("2532"),s("1276"),s("159b"),s("2909")),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"chart",staticClass:"chart-box"})},u=[],d=s("2f62"),h=s("e591"),m=s.n(h),b={props:{tradeList:{default:function(){return[]},type:Array,require:!1}},computed:Object(n["a"])({list:function(){return this.tradeList.map((function(t){return[t.ts,t.price]}))}},Object(d["c"])({theme:"theme"})),watch:{},data:function(){return{chart:void 0}},methods:{intiChart:function(t){var e=this;m.a.setOptions({global:{timezoneOffset:-480}}),this.chart=m.a.stockChart(t,{chart:{marginRight:40,marginTop:0,marginLeft:0,marginBottom:20,padding:0,panning:!1,pinchType:"",zoomType:"",panKey:"shift",backgroundColor:"transparent",borderColor:"transparent",borderWidth:"1",plotBackgroundColor:"transparent",Point:{visible:!1}},rangeSelector:{enabled:!1},navigator:{enabled:!1},scrollbar:{enabled:!1},exporting:{enabled:!0},credits:{enabled:!1},mapNavigation:{enabled:!1,enableButtons:!1},navigation:{enabled:!1,buttonOptions:{}},title:{text:null},yAxis:{gridLineWidth:1,tickWidth:0,tickColor:"#1E2E3F",tickAmount:7,lineColor:"#1E2E3F",labels:{align:"center",x:0,style:{color:"light"==this.theme?"#333":"#dcdee0",fontSize:"8px"},useHTML:!0,formatter:function(t){return e.nFormatter(t.value,3)}},opposite:!0,gridLineColor:"transparent"},xAxis:{type:"datetime",dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%m-%d",week:"%m-%d",month:"%Y-%m",year:"%Y"},tickWidth:0,lineWidth:"0",tickLength:0,labels:{style:{color:"light"==this.theme?"#333":"#dcdee0",fontSize:"10px"},y:10}},tooltip:{enabled:!1,dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%Y-%m-%d",week:"%m-%d",month:"%Y-%m",year:"%Y"}},legend:{enabled:!1},plotOptions:{areaspline:{allowPointSelect:!1,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"rgba(7,193,96,.58)"],[1,"rgba(7,193,96,.13)"]]},marker:{radius:2},lineWidth:2,threshold:null}},series:[{marker:{radius:0,lineWidth:0,lineColor:"#fba845",fillColor:"#fba845",states:{}},type:"areaspline",name:"",data:this.list,color:"#07c160"}]})},nFormatter:function(t,e){var s,i=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}],a=/\.0+$|(\.[0-9]*[1-9])0+$/;for(s=i.length-1;s>0;s--)if(t>=i[s].value)break;return(t/i[s].value).toFixed(e).replace(a,"$1")+i[s].symbol},setData:function(t){this.chart.series[0].setData(t)},addPoint:function(t){this.chart.series[0].addPoint(t,!0,!0)}},mounted:function(){this.intiChart(this.$el)},destroyed:function(){}},f=b,v=(s("99c7"),s("2877")),p=Object(v["a"])(f,l,u,!1,null,"c1f03684",null),_=p.exports,g=s("97ca"),y=s("b4b8"),C=s("4124"),x=s("b111"),k=s("6863"),$={props:{collect:{default:function(){return[]},type:Array,require:!1},marketList:{defalut:function(){return[]},type:Array,require:!1}},components:{timeSharing:_,sellAndBuy:g["a"]},name:"exchange-transaction",data:function(){return{buyList:[],sellList:[],tradeList:[],form:{direction:"buy",type:1,symbol:this.symbol,entrust_price:"",amount:"",trigger_price:void 0,total:""},balanceMap:{},unSymbol:"",newPrice:{},price_cny:0}},computed:Object(n["a"])(Object(n["a"])({},Object(d["c"])({ws:"ws"})),{},{isLogin:function(){return Boolean(localStorage.token)},symbol:function(){return this.$route.query.symbol},isCoolect:function(){return this.collect.map((function(t){return t.pair_name})).includes(this.symbol)},typeList:function(){return[{value:1,label:this.$t("exchange.d6")},{value:2,label:this.$t("exchange.d7")}]},activeType:function(){var t=this;return this.typeList.find((function(e){return e.value==t.form.type}))},activeCoin:function(){var t=this;if(!this.marketList.length)return{};var e=[];return this.marketList.forEach((function(t){t.marketInfoList.forEach((function(t){e.push(t)}))})),e.find((function(e){return e.pair_name==t.symbol}))},currentCoin:function(){return this.symbol?this.symbol.split("/")[0]:""},targetCoin:function(){return this.symbol?this.symbol.split("/")[1]:""},currentBalance:function(){return this.balanceMap[this.currentCoin]||{}},targetBalance:function(){return this.balanceMap[this.targetCoin]||{}},totalMoney:function(){var t=0;return t=1==this.form.type?k["a"].multiple(this.form.amount,this.form.entrust_price):this.form.amount,t},activeStep:function(){var t=0;if("buy"==this.form.direction){if(!this.targetBalance.usable_balance)return 0;t=this.totalMoney/this.targetBalance.usable_balance}else if("sell"==this.form.direction){if(!this.currentBalance.usable_balance)return 0;t=this.form.amount/this.currentBalance.usable_balance}return isNaN(t)||(t=t.toFixed(3)),t<.25?0:t<.5?1:t<.75?2:t<1?3:4},usable:function(){return"buy"==this.form.direction?this.targetBalance.usable_balance?this.omitTo(this.targetBalance.usable_balance,this.activeCoin.price_decimals):0:this.currentBalance.usable_balance?this.omitTo(this.currentBalance.usable_balance,this.activeCoin.qty_decimals):0},usableUnit:function(){return"buy"==this.form.direction?this.targetCoin:this.currentCoin}}),watch:{symbol:function(t,e){this.getBooks(),this.getUserBalance(),e&&this.unLink(e.replace("/","").toLocaleLowerCase())}},methods:{parseTime:x["a"].parseTime,omitTo:k["a"].omitTo,sliderChange:function(t){var e=0;switch(t){case 0:e=0;break;case 1:e=.25;break;case 2:e=.5;break;case 3:e=.75;break;case 4:e=1;break}if("buy"==this.form.direction){if(!this.targetBalance.usable_balance)return;1==this.form.type?this.form.amount=k["a"].multiple(this.targetBalance.usable_balance/this.form.entrust_price,e,4):2==this.form.type&&(this.form.amount=this.form.amount=k["a"].multiple(this.targetBalance.usable_balance,e,4))}else if("sell"==this.form.direction){if(!this.currentBalance.usable_balance)return;this.form.amount=k["a"].multiple(this.currentBalance.usable_balance,e,4)}},storeEntrust:function(){var t=this,e=this.form;if(1==this.form.type){if(!this.form.entrust_price)return void this.$toast(this.$t("exchange.d8"));if(!this.form.amount)return void this.$toast(this.$t("exchange.d9"))}else if(2==this.form.type&&(this.form.total=this.form.amount,!this.form.total))return void("buy"==this.form.direction?this.$toast(this.$t("exchange.e0")):this.$toast(this.$t("exchange.d9")));this.form.symbol=this.symbol,y["a"].storeEntrust(e,{btn:this.$refs.btn}).then((function(){t.form.amount="",t.form.total="",t.$toast.success(t.$t("exchange.e1")),t.getUserBalance()})).catch((function(){}))},getBooks:function(){var t=this;this.symbol&&C["a"].getBooks({symbol:this.symbol}).then((function(e){t.buyList=e.data.buyList,t.sellList=e.data.sellList.sort((function(t,e){return e.price-t.price})),t.tradeList=e.data.tradeList,t.linkSocket(t.activeCoin.symbol),t.setChartData(t.tradeList),t.getDefaultPrice(),t.newPrice=t.tradeList[0]||{}}))},getDefaultPrice:function(){"buy"==this.form.direction?this.form.entrust_price=Math.min.apply(Math,Object(o["a"])(this.tradeList.map((function(t){return t.price})))):this.form.entrust_price=Math.max.apply(Math,Object(o["a"])(this.buyList.map((function(t){return t.price}))))},getValue:function(t){var e=this.buyList.concat(this.sellList).map((function(t){return t.amount})),s=Math.max.apply(Math,Object(o["a"])(e));return 100*k["a"].division(t,s,2)},selectType:function(){var t=this;this.$picker(this.typeList,{value:this.form.type}).then((function(e){t.form.type=e}))},getUserBalance:function(){var t=this;this.symbol&&this.isLogin&&(y["a"].getUserBalance({symbol:this.symbol}).then((function(e){t.balanceMap=Object(n["a"])(Object(n["a"])({},t.balanceMap),e.data)})),this.getCurrencyExCny())},getCurrencyExCny:function(){var t=this;y["a"].getCurrencyExCny({coin_name:this.targetCoin}).then((function(e){t.price_cny=e.data.price_cny}))},linkSocket:function(t){this.unSymbol=t,this.ws.send({cmd:"sub",msg:"buyList_".concat(t)}),this.ws.send({cmd:"sub",msg:"sellList_".concat(t)}),this.ws.send({cmd:"sub",msg:"tradeList_".concat(t)})},unLink:function(t){this.ws.send({cmd:"unsub",msg:"buyList_".concat(t)}),this.ws.send({cmd:"unsub",msg:"sellList_".concat(t)}),this.ws.send({cmd:"unsub",msg:"tradeList_".concat(t)})},socketMessage:function(){var t=this;this.ws.on("message",(function(e){var s=t.activeCoin&&t.activeCoin.symbol,i=e.data,a=e.sub;switch(a){case"buyList_".concat(s):t.buyList=i;break;case"sellList_".concat(s):t.sellList=i.sort((function(t,e){return e.price-t.price}));break;case"tradeList_".concat(s):t.tradeList.unshift(i),t.tradeList.pop(),t.addChartPoint(i),t.newPrice=i;break}}))},setChartData:function(t){if(this.$refs.highChart){var e=t.map((function(t){return[t.ts,t.price]}));this.$refs.highChart.setData(e)}},addChartPoint:function(t){this.$refs.highChart&&this.$refs.highChart.addPoint([t.ts,t.price])}},created:function(){this.getBooks(),this.getUserBalance(),this.socketMessage(),this.$route.query.direction&&(this.form.direction=this.$route.query.direction)},destroyed:function(){this.unLink(this.unSymbol)}},L=$,w=(s("f697"),Object(v["a"])(L,c,r,!1,null,"d16a3180",null)),j=w.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-paging",{ref:"list",staticClass:"bg-panel-1",attrs:{ajax:t.getCurrentEntrust,tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{key:e.order_no,staticClass:"item bg-panel-4 m-md rounded-sm"},[s("div",{staticClass:"head d-flex align-center border-b p-x-md p-y-xs justify-between"},[s("div",{staticClass:"d-flex"},[1==e.entrust_type?s("div",{staticClass:"suatus color-buy fn-20 m-r-xs rounded"},[t._v(t._s(t.$t("exchange.b5")))]):t._e(),2==e.entrust_type?s("div",{staticClass:"suatus color-sell fn-20 m-r-xs rounded"},[t._v(t._s(t.$t("exchange.b6")))]):t._e(),s("div",[s("div",{staticClass:"color-light fn-20"},[t._v(t._s(e.symbol))]),s("div",{staticClass:"fn-10"},[t._v(t._s(e.created_at))])])]),s("div",{staticClass:"d-flex"},[s("span",[t._v(t._s(e.status_text))])])]),s("div",{staticClass:"p-x-md p-y-xs"},[s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.b7")))]),s("div",{staticClass:"color-light"},[t._v(t._s(e.entrust_price))])]),s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.b8")))]),s("div",{staticClass:"color-light"},[1==e.type?[t._v(t._s(t.$t("exchange.b9")))]:t._e(),2==e.type?[t._v(t._s(t.$t("exchange.c0")))]:t._e()],2)]),s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.c1")))]),s("div",{staticClass:"color-buy"},[t._v(t._s(e.traded_amount))])]),s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.c2")))]),s("div",{staticClass:"color-light"},[t._v(t._s(e.amount))])]),s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.g3")))]),s("div",{staticClass:"color-light"},[s("v-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){return t.ifCancel(e)}}},[t._v(t._s(t.$t("exchange.g4")))])],1)])])])]}}])})},E=[],T=(s("a434"),s("f8b7")),S={data:function(){return{getCurrentEntrust:T["a"].getCurrentEntrust}},methods:{ifCancel:function(t){var e=this;this.$dialog.confirm({title:this.$t("common.tips"),message:this.$t("exchange.g5")+"?"}).then((function(){e.cancelEntrust(t)})).catch((function(){}))},cancelEntrust:function(t){var e=this,s={entrust_id:t.id,entrust_type:t.entrust_type,symbol:t.symbol};T["a"].cancelEntrust(s).then((function(){e.$toast.success(e.$t("exchange.g6")),e.$refs.list.list.forEach((function(s,i){t.id==s.id&&e.$refs.list.list.splice(i,1)}))}))}}},M=S,B=Object(v["a"])(M,O,E,!1,null,null,null),P=B.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-paging",{staticClass:"bg-panel-1",attrs:{ajax:t.getHistoryEntrust},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{key:e.order_no,staticClass:"item bg-panel-4 m-md rounded-sm"},[s("div",{staticClass:"head d-flex align-center border-b p-x-md p-y-xs justify-between"},[s("div",{staticClass:"d-flex"},[1==e.entrust_type?s("div",{staticClass:"suatus color-buy fn-20 m-r-xs rounded"},[t._v(t._s(t.$t("exchange.b5")))]):t._e(),2==e.entrust_type?s("div",{staticClass:"suatus color-sell fn-20 m-r-xs rounded"},[t._v(t._s(t.$t("exchange.b6")))]):t._e(),s("div",[s("div",{staticClass:"color-light fn-20"},[t._v(t._s(e.symbol))]),s("div",{staticClass:"fn-10"},[t._v(t._s(e.created_at))])])]),s("div",[t._v(t._s(e.status_text))])]),s("div",{staticClass:"p-x-md p-y-xs"},[s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.b7")))]),s("div",{staticClass:"color-light"},[t._v(t._s(e.entrust_price))])]),s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.b8")))]),s("div",{staticClass:"color-light"},[1==e.type?[t._v(t._s(t.$t("exchange.b9")))]:t._e(),2==e.type?[t._v(t._s(t.$t("exchange.c0")))]:t._e()],2)]),s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.c1")))]),s("div",{staticClass:"color-buy"},[t._v(t._s(e.traded_amount))])]),s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.e2")))]),s("div",{staticClass:"color-buy"},[t._v(t._s(1*t.division(e.traded_money,e.traded_amount)||"--"))])]),s("div",{staticClass:"row d-flex m-y-xs justify-between"},[s("div",{staticClass:"label fn-sm"},[t._v(t._s(t.$t("exchange.c2")))]),s("div",{staticClass:"color-light"},[t._v(t._s(e.amount))])])])])]}}])})},q=[],D={data:function(){return{getHistoryEntrust:T["a"].getHistoryEntrust}},methods:{division:k["a"].division}},N=D,U=Object(v["a"])(N,H,q,!1,null,null,null),F=U.exports,I=s("8ec2"),W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layout-main"},[s("div",{staticClass:"m-md bg-panel-4 rounded p-md fn-center"},[s("div",{staticClass:"color-light fn-20 fn-bold m-b-md"},[t._v(t._s(t.detail.coin_name))]),s("div",{staticClass:"m-y-md"},[s("div",{staticClass:"label m-b-xs"},[t._v(t._s(t.$t("purchase.a0")))]),s("div",{staticClass:"fn-lg color-theme-1"},[t._v("1 "+t._s(t.detail.coin_name)+" = "+t._s(t.detail.issue_price)+" USDT")])]),s("div",{staticClass:"m-y-md"},[s("div",{staticClass:"label m-b-xs"},[t._v(t._s(t.$t("purchase.a1")))]),s("div",{staticClass:"color-light"},[t._v(t._s(t.detail.subscribe_currency))])]),s("div",{staticClass:"m-y-md"},[s("div",{staticClass:"label m-b-xs"},[t._v(t._s(t.$t("purchase.a2")))]),s("div",{staticClass:"color-light"},[t._v(t._s(t.parseTime(t.detail.expected_time_online)))])]),s("div",{staticClass:"m-y-md"},[s("div",{staticClass:"label m-b-xs"},[t._v(t._s(t.$t("purchase.a3")))]),s("div",{staticClass:"color-light"},[t._v(t._s(t.parseTime(t.detail.start_subscription_time)))])]),s("div",{staticClass:"m-y-md"},[s("div",{staticClass:"label m-b-xs"},[t._v(t._s(t.$t("purchase.a4")))]),s("div",{staticClass:"color-light"},[t._v(t._s(t.parseTime(t.detail.end_subscription_time)))])])]),s("div",{staticClass:"m-md bg-panel-4 rounded p-md"},[s("div",{staticClass:"title p-b-xs border-b"},[t._v(t._s(t.$t("purchase.a5")))]),s("div",{staticClass:"m-y-md"},[s("div",{staticClass:"label"},[t._v(t._s(t.$t("purchase.a1")))]),s("div",{staticClass:"border-b p-y-xs color-light",on:{click:t.selectCoin}},[s("v-input",{attrs:{disabled:"",value:t.activeCoin.coin_name,placeholder:t.$t("purchase.a6")},scopedSlots:t._u([{key:"right",fn:function(){return[s("i",{staticClass:"iconfont"},[t._v("")])]},proxy:!0}])})],1),s("div",{staticClass:"tips m-t-xs fn-sm d-flex justify-between"},[s("div",[t._v("1 "+t._s(t.activeCoin.coin_name)+" ≈ "+t._s(t.omitTo(t.activeCoin.proportion_amount,4))+" "+t._s(t.detail.coin_name))]),s("div",{staticClass:"color-theme-1"},[t._v(t._s(t.num||0)+" "+t._s(t.activeCoin.coin_name)+" ≈ "+t._s(t.total)+" "+t._s(t.detail.coin_name))])])]),s("div",{staticClass:"m-y-md"},[s("div",{staticClass:"label"},[t._v(t._s(t.$t("purchase.a7")))]),s("div",{staticClass:"border-b p-y-xs color-light"},[s("v-input",{attrs:{type:"number",placeholder:t.$t("purchase.a8")},scopedSlots:t._u([{key:"right",fn:function(){return[s("div",{staticClass:"color-theme-1",on:{click:function(e){t.num=1*t.activeCoin.usable_balance||0}}},[t._v(t._s(t.$t("purchase.a9")))])]},proxy:!0}]),model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1)]),s("v-button",{ref:"btn",staticClass:"w-max",attrs:{type:"theme"},on:{click:t.ifSubscribeNow}},[t._v(t._s(t.$t("purchase.b0")))])],1),s("div",{staticClass:"m-md bg-panel-4 rounded p-md"},[s("div",{staticClass:"title p-b-xs border-b"},[t._v(t._s(t.$t("purchase.b1")))]),s("van-steps",{attrs:{active:t.detail.status-1,"active-color":"#f05319","align-center":"",direction:"vertical"}},[s("van-step",[s("div",[t._v(t._s(t.$t("purchase.b2")))])]),s("van-step",[s("div",[t._v(t._s(t.$t("purchase.b3")))]),s("div",[t._v(t._s(t.parseTime(t.detail.start_subscription_time)))])]),s("van-step",[s("div",[t._v(t._s(t.$t("purchase.b4")))]),s("div",[t._v(t._s(t.parseTime(t.detail.end_subscription_time)))])]),s("van-step",[s("div",[t._v(t._s(t.$t("purchase.b5")))]),s("div",[t._v(t._s(t.parseTime(t.detail.announce_time)))])])],1)],1),s("div",{staticClass:"m-md bg-panel-4 rounded p-md"},[s("div",{staticClass:"title p-b-xs border-b"},[t._v(t._s(t.$t("purchase.b6")))]),s("div",{staticClass:"m-t-md edit-content",domProps:{innerHTML:t._s(t.detail.project_details)}})])])},z=[],A=s("d4ec"),Y=s("bee2"),R=s("365c"),G=function(){function t(){Object(A["a"])(this,t)}return Object(Y["a"])(t,null,[{key:"subscribeTokenList",value:function(t){return Object(R["b"])("/user/subscribeTokenList",t)}},{key:"subscribe",value:function(t){return Object(R["b"])("/user/subscribe",t)}},{key:"subscribeNow",value:function(t){return Object(R["b"])("/user/subscribeNow",t)}}]),t}(),J=G,K={data:function(){return{coinList:[],detail:{},num:"",coin:""}},computed:{total:function(){return this.activeCoin.proportion_amount?k["a"].multiple(this.num||0,1*this.activeCoin.proportion_amount,2):0},activeCoin:function(){var t=this;return this.coin?this.coinList.find((function(e){return e.coin_name==t.coin})):{}}},methods:{omitTo:function(t,e){return t?k["a"].omitTo(t,e):0},parseTime:function(t){if(t)return x["a"].parseTime(t)},subscribeTokenList:function(){var t=this;J.subscribeTokenList().then((function(e){t.coinList=e.data,t.coin=t.coinList[0].coin_name}))},getInfo:function(){var t=this;J.subscribe().then((function(e){t.detail=e.data}))},selectCoin:function(){var t=this,e=this.coinList.map((function(t){return{label:t.coin_name,value:t.coin_name}}));this.$picker(e,{value:this.coin}).then((function(e){t.coin=e}))},ifSubscribeNow:function(){var t=this;this.$dialog.confirm({title:this.$t("common.tips"),message:"".concat(this.$t("purchase.b7")).concat(this.activeCoin.coin_name).concat(this.$t("purchase.b8"),"？")}).then((function(){t.subscribeNow()})).catch((function(){}))},subscribeNow:function(){var t=this,e={amount:this.num,coin_name:this.activeCoin.coin_name};J.subscribeNow(e,{btn:this.$refs.btn}).then((function(e){e&&(t.$toast.success(t.$t("purchase.b9")),t.num="")})).catch((function(){}))}},created:function(){this.subscribeTokenList(),this.getInfo()}},V=K,Q=(s("222c"),Object(v["a"])(V,W,z,!1,null,"8319ca38",null)),X=Q.exports,Z=s("3191"),tt={name:"exchange-operation",components:{exchangeTransaction:j,currentCommission:P,historyCommisson:F,symbolList:I["a"],purchase:X},data:function(){return{tab:0,tab1:0,symbolListShow:!1,marketList:[],collect:[]}},computed:Object(n["a"])(Object(n["a"])({},Object(d["c"])({ws:"ws"})),{},{isLogin:function(){return Boolean(localStorage.token)},query:function(){return this.$route.query}}),methods:{getMarketList:function(){var t=this;C["a"].getMarketList().then((function(e){if(t.marketList=e.data,!t.query.symbol){var s=t.marketList[0].marketInfoList[0];t.checkSymbol(s)}t.$nextTick((function(){t.linkSocket()}))}))},getCollect:function(){var t=this;this.isLogin&&Z["a"].getCollect().then((function(e){t.collect=e.data||[]})).catch((function(){}))},checkSymbol:function(t){this.symbolListShow=!1,t.pair_name!=this.query.symbol&&this.$router.replace({query:{symbol:t.pair_name}})},option:function(){var t=this,e={pair_name:this.query.symbol};Z["a"].option(e).then((function(e){t.getCollect(),e.data?t.$toast(t.$t("exchange.a6")):t.$toast(t.$t("exchange.a7"))})).catch((function(){}))},linkSocket:function(){var t=this,e="exchangeMarketList";this.ws.send({cmd:"sub",msg:e}),this.ws.on("message",(function(s){var i=s.data,a=s.sub;a==e&&(t.marketList=i)}))}},created:function(){this.getMarketList(),this.getCollect()},destroyed:function(){this.ws.send({cmd:"unsub",msg:"exchangeMarketList"})}},et=tt,st=Object(v["a"])(et,i,a,!1,null,"e9157d48",null);e["default"]=st.exports},f8b7:function(t,e,s){"use strict";var i=s("d4ec"),a=s("bee2"),n=s("365c"),c=function(){function t(){Object(i["a"])(this,t)}return Object(a["a"])(t,null,[{key:"storeEntrust",value:function(t){return Object(n["b"])("/exchange/storeEntrust",t)}},{key:"getHistoryEntrust",value:function(t){return Object(n["a"])("/exchange/getHistoryEntrust",t)}},{key:"getCurrentEntrust",value:function(t){return Object(n["a"])("/exchange/getCurrentEntrust",t)}},{key:"getConditionEntrust",value:function(t){return Object(n["a"])("/exchange/getConditionEntrust",t)}},{key:"getEntrustTradeRecord",value:function(t){return Object(n["a"])("/exchange/getEntrustTradeRecord",t)}},{key:"cancelEntrust",value:function(t){return Object(n["b"])("/exchange/cancelEntrust",t)}},{key:"batchCancelEntrust",value:function(t){return Object(n["b"])("/exchange/batchCancelEntrust",t)}},{key:"getExchangeSymbol",value:function(){return Object(n["a"])("/exchange/getExchangeSymbol")}},{key:"getOptionHistoryOrders",value:function(t){return Object(n["a"])("/option/getOptionHistoryOrders",t)}}]),t}();e["a"]=c}}]);